

# Intro 3: Links

## 一、链路的核心属性与分组延迟

### 1. 基本属性定义

- **带宽**：单位时间内链路可发送/接收的比特数，衡量链路“宽度”，单位为 bps（比特/秒）。
- **传播延迟**：比特沿链路传输的时间，衡量链路“长度”，单位为秒。
- **带宽-延迟积**：带宽与传播延迟的乘积，即链路“容量”，表示某一时刻链路上可容纳的最大比特数。

### 2. 分组延迟计算公式

分组总延迟 = 传输延迟 + 传播延迟 + 排队延迟（过载时新增）
- 传输延迟 = 分组大小（比特）/ 带宽（bps），即把所有比特送入链路的时间。

### 3. 实例计算（800比特分组）
- 链路参数：带宽 1 Mbps（1000000 bps），传播延迟 1 ms（0.001s）
- 传输延迟 = 800 / 1000000 = 0.0008 s（0.8 ms）
- 总延迟 = 0.8 ms + 1 ms = 1.8 ms（无过载时）

### 4. 链路选择权衡
- 小分组（如 10 字节）：传播延迟占主导，选择低传播延迟链路（如Link2：1 Mbps+1 ms）更优。
- 大分组（如 10000 字节）：传输延迟占主导，选择高带宽链路（如Link1：10 Mbps+10 ms）更优。

---

## 二、管道图

### 1. 核心作用
可视化“冻结时刻”链路上的比特分布，辅助理解链路属性与延迟关系。

### 2. 关键维度对应
- 高度 = 带宽：单位时间内可送入链路的比特数，带宽越高，管道“越粗”。
- 宽度 = 传播延迟：比特从一端到另一端的时间，延迟越长，管道“越长”。
- 面积 = 带宽-延迟积：链路瞬时最大容纳比特数。

### 3. 与传输延迟的关联
- 管道中分组的“宽度”对应传输延迟。
- 带宽越高，单位时间可传输更多比特，分组在管道中的“宽度”越窄，传输延迟越短。

---

## 三、过载链路

### 1. 路由器分组交换逻辑
路由器接收分组后转发至目标链路，若多条入链路的分组同时涌向同一条出链路，会触发过载。

### 2. 两种过载类型及处理
- **瞬态过载**：分组同时到达，路由器无法并行处理，需将多余分组排队。无新分组时，队列会逐步排空，属于常见情况。
- **持续过载**：链路容量不足以承载入站流量，队列会被占满，最终导致分组丢失。
  - 解决方案：手动升级链路带宽；路由器通知发送方减速。

### 3. 分组的生命周期
1. 发送方将数据封装为分组（添加头部）；
2. 分组通过链路传输，到达路由器后被转发；
3. 分组可能被排队或直接转发（无过载时）；
4. 重复转发步骤，直至到达目标或被丢弃。

---

## 四、学期课程预览

### 1. 基础原理模块

- 核心内容：分层与头部、设计原则、链路特性、分组生命周期；
- 对应项目：Project1 - Traceroute。

### 2. 路由模块

- 核心内容：路由器转发决策、主机寻址、硬件路由器实现；
- 对应项目：Project2 - Routing。

### 3. 可靠性模块

- 核心内容：TCP 可靠通信、拥塞控制（避免链路过载）；
- 对应项目：Project3 - Transport。

### 4. 应用与网络接入模块

- 核心内容：DNS 域名解析、HTTP 应用层协议、ARP/DHCP 接入流程、NAT 地址复用、TLS 安全通信。

### 5. 高级主题模块

- 数据中心网络：SDN 集中控制、主机网络优化；
- 非客户端-服务器架构：组播、AI 训练相关的集合通信；
- 无线通信：L1/L2 层设计、蜂窝网络。
